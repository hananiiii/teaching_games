<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korean Proficiency Test - Level 1</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom styles to complement Tailwind */
        .question-container {
            transition: all 0.2s ease-in-out;
        }
        .option-button:hover {
            transform: translateY(-1px);
        }
        .selected {
            background-color: #dbeafe;
            border-color: #3b82f6;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        /* Hide the SVG radar chart since we're using Chart.js */
        .radar-svg {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen py-8">
    <div id="app" class="max-w-4xl mx-auto p-6"></div>

    <script>
        // State management
        let state = {
            name: '',
            nationality: '',
            birthYear: '',
            answers: {},
            showTest: false,
            showResults: false,
            score: 0,
            vocabScore: 0,
            grammarScore: 0,
            understandScore: 0
        };

        const currentDate = '2025.08.25';

        // Questions array (same as provided)
        const questions = [
            { id: 1, section: 'vocabulary', type: 'multiple', korean: '가: 이 가방이 크다고 생각해요?\n나: 아니요, 가방이 ( ).', options: ['① 작습니다', '② 큽니다', '③ 좋습니다', '④ 나쁩니다'], correct: '1' },
            { id: 2, section: 'vocabulary', type: 'multiple', korean: '가: 오늘 날씨가 덥네요.\n나: 네, 어제는 ( ).', options: ['① 더웠어요', '② 추웠어요', '③ 좋았어요', '④ 싫었어요'], correct: '2' },
            { id: 3, section: 'vocabulary', type: 'multiple', korean: '가: 영화가 재미있었어요?\n나: 아니요, ( ).', options: ['① 재미없었어요', '② 좋았어요', '③ 길었어요', '④ 짧았어요'], correct: '1' },
            { id: 4, section: 'vocabulary', type: 'multiple', korean: '가: 이 음식이 싸요?\n나: 아니요, ( ).', options: ['① 저렴해요', '② 비싸요', '③ 맛있어요', '④ 달아요'], correct: '2' },
            { id: 5, section: 'vocabulary', type: 'multiple', korean: '가: 학교가 집에서 멀어요?\n나: 아니요, ( ).', options: ['① 가까워요', '② 좋아요', '③ 커요', '④ 예뻐요'], correct: '1' },
            { id: 6, section: 'vocabulary', type: 'multiple', korean: '가: 이 방이 밝아요.\n나: 네, 저 방은 ( ).', options: ['① 어두워요', '② 밝아요', '③ 깨끗해요', '④ 넓어요'], correct: '1' },
            { id: 7, section: 'vocabulary', type: 'multiple', korean: '가: 오빠가 키가 커요?\n나: 아니요, ( ).', options: ['① 키가 작아요', '② 키가 커요', '③ 잘생겼어요', '④ 친절해요'], correct: '1' },
            { id: 8, section: 'vocabulary', type: 'multiple', korean: '가: 이 커피가 뜨거워요.\n나: 그럼 저 커피는 ( )?', options: ['① 차가워요', '② 뜨거워요', '③ 달아요', '④ 써요'], correct: '1' },
            { id: 9, section: 'vocabulary', type: 'multiple', korean: '가: 아침에 일찍 일어나요?\n나: 아니요, ( ) 일어나요.', options: ['① 늦게', '② 빨리', '③ 자주', '④ 가끔'], correct: '1' },
            { id: 10, section: 'vocabulary', type: 'multiple', korean: '가: 이 길이 복잡해요?\n나: 아니요, ( ).', options: ['① 조용해요', '② 시끄러워요', '③ 깨끗해요', '④ 더러워요'], correct: '1' },
            { id: 11, section: 'grammar', type: 'mark', korean: '저는 (학생 / 이에요 / 입니다).', options: ['① 학생입니다', '② 학생이에요', '③ 학생해요', '④ 학생있어요'], correct: '①' },
            { id: 12, section: 'grammar', type: 'mark', korean: '친구 (가 / 이 / 을) 만나요.', options: ['① 친구가', '② 친구를', '③ 친구에', '④ 친구로'], correct: '②' },
            { id: 13, section: 'grammar', type: 'mark', korean: '도서관 (에서 / 에 / 로) 공부해요.', options: ['① 도서관에서', '② 도서관에', '③ 도서관을', '④ 도서관이'], correct: '①' },
            { id: 14, section: 'grammar', type: 'mark', korean: '이것 (은 / 는 / 을) 뭐예요?', options: ['① 이것은', '② 이것을', '③ 이것에', '④ 이것이'], correct: '①' },
            { id: 15, section: 'grammar', type: 'mark', korean: '집 (에 / 에서 / 로) 가요.', options: ['① 집에', '② 집에서', '③ 집을', '④ 집으로'], correct: '①' },
            { id: 16, section: 'grammar', type: 'multiple', korean: '저는 ( )을 먹어요.', options: ['① 책', '② 사과', '③ 펜', '④ 가방'], correct: '2' },
            { id: 17, section: 'grammar', type: 'multiple', korean: '학교에 ( ) 가요.', options: ['① 버스로', '② 친구와', '③ 공부하러', '④ 책을'], correct: '2' },
            { id: 18, section: 'grammar', type: 'multiple', korean: '이것은 ( )입니다.', options: ['① 물', '② 선생님', '③ 책상', '④ 꽃'], correct: '3' },
            { id: 19, section: 'grammar', type: 'multiple', korean: '저는 ( )에 삽니다.', options: ['① 학교', '② 서울', '③ 책', '④ 친구'], correct: '2' },
            { id: 20, section: 'grammar', type: 'multiple', korean: '( )이/가 좋아요?', options: ['① 음악', '② 집', '③ 물', '④ 가방'], correct: '1' },
            { id: 21, section: 'understanding', type: 'multiple', korean: '가: 안녕하세요!\n나: ( )', options: ['① 안녕하세요!', '② 안녕히 가세요!', '③ 고맙습니다!', '④ 죄송합니다!'], correct: '1' },
            { id: 22, section: 'understanding', type: 'multiple', korean: '가: 이름이 뭐예요?\n나: ( )', options: ['① 네, 맞아요', '② 저는 김철수예요', '③ 한국 사람이에요', '④ 20살이에요'], correct: '2' },
            { id: 23, section: 'understanding', type: 'multiple', korean: '가: 지금 몇 시예요?\n나: ( )', options: ['① 2월이에요', '② 월요일이에요', '③ 3시예요', '④ 한국이에요'], correct: '3' },
            { id: 24, section: 'understanding', type: 'multiple', korean: '가: 어디에서 왔어요?\n나: ( )', options: ['① 학교에 가요', '② 중국에서 왔어요', '③ 한국어를 공부해요', '④ 책을 읽어요'], correct: '2' },
            { id: 25, section: 'understanding', type: 'multiple', korean: '가: 뭘 드시겠어요?\n나: ( )', options: ['① 네, 있어요', '② 아니요, 괜찮아요', '③ 커피 주세요', '④ 감사합니다'], correct: '3' },
            { id: 26, section: 'understanding', type: 'multiple', korean: '가: 어디에 살아요?\n나: ( )', options: ['① 서울에 살아요', '② 책이에요', '③ 학교에요', '④ 친구예요'], correct: '1' },
            { id: 27, section: 'understanding', type: 'multiple', korean: '가: 뭐하세요?\n나: ( )', options: ['① 공부해요', '② 집에요', '③ 물이에요', '④ 가방이에요'], correct: '1' },
            { id: 28, section: 'understanding', type: 'multiple', korean: '가: 몇 살이에요?\n나: ( )', options: ['① 25살이에요', '② 책이에요', '③ 집이에요', '④ 학교예요'], correct: '1' },
            { id: 29, section: 'understanding', type: 'multiple', korean: '가: 맛있어요?\n나: ( )', options: ['① 네, 맛있어요', '② 아니요, 좋아요', '③ 책이에요', '④ 집이에요'], correct: '1' },
            { id: 30, section: 'understanding', type: 'multiple', korean: '가: 언제 가요?\n나: ( )', options: ['① 내일 가요', '② 책이에요', '③ 집이에요', '④ 물이에요'], correct: '1' },
            { id: 31, section: 'understanding', type: 'multiple', korean: '가: 누구예요?\n나: ( )', options: ['① 저는 학생이에요', '② 책이에요', '③ 집이에요', '④ 물이에요'], correct: '1' },
            { id: 32, section: 'understanding', type: 'multiple', korean: '가: 어디 가요?\n나: ( )', options: ['① 학교에 가요', '② 책을 읽어요', '③ 집이에요', '④ 물이에요'], correct: '1' },
            { id: 33, section: 'understanding', type: 'multiple', korean: '가: 뭐가 좋아요?\n나: ( )', options: ['① 음악이 좋아요', '② 책이에요', '③ 집이에요', '④ 물이에요'], correct: '1' },
            { id: 34, section: 'understanding', type: 'multiple', korean: '가: 언제 만날까요?\n나: ( )', options: ['① 내일 만날게요', '② 책이에요', '③ 집이에요', '④ 물이에요'], correct: '1' },
            { id: 35, section: 'understanding', type: 'multiple', korean: '가: 어디서 공부해요?\n나: ( )', options: ['① 도서관에서 공부해요', '② 집에서', '③ 학교에서', '④ 책에서'], correct: '1' },
            { id: 36, section: 'understanding', type: 'multiple', korean: '가: 뭐 먹어요?\n나: ( )', options: ['① 김치를 먹어요', '② 책이에요', '③ 집이에요', '④ 물이에요'], correct: '1' },
            { id: 37, section: 'understanding', type: 'multiple', korean: '가: 어디서 일해요?\n나: ( )', options: ['① 회사에서 일해요', '② 집에서', '③ 학교에서', '④ 책에서'], correct: '1' },
            { id: 38, section: 'understanding', type: 'multiple', korean: '가: 뭐 사요?\n나: ( )', options: ['① 사과를 사요', '② 책을 사요', '③ 집을 사요', '④ 물을 사요'], correct: '1' },
            { id: 39, section: 'understanding', type: 'multiple', korean: '가: 언제 오세요?\n나: ( )', options: ['① 5시에 와요', '② 책이에요', '③ 집이에요', '④ 물이에요'], correct: '1' },
            { id: 40, section: 'understanding', type: 'multiple', korean: '가: 누구와 가요?\n나: ( )', options: ['① 친구와 가요', '② 책과 가요', '③ 집과 가요', '④ 물과 가요'], correct: '1' },
        ];

        // Helper functions
        function formatQuestionText(text) {
            return text.split('\n').map(line => 
                `<div class="${line.startsWith('가:') || line.startsWith('나:') ? 'text-blue-700 font-medium' : ''}">${line}</div>`
            ).join('');
        }

        function getSectionTitle(questionId) {
            if (questionId >= 1 && questionId <= 10) {
                return '(1-10) 밑줄 친 부분과 반대되는 뜻을 가진 것을 고르십시오.\nChoose the word that has the opposite meaning to the underlined part.';
            } else if (questionId >= 11 && questionId <= 15) {
                return '(11-15) 알맞은 것에 O 하십시오.\nMark O for the right one.';
            } else if (questionId >= 16 && questionId <= 40) {
                return '(16-40) 가장 알맞은 답을 고르십시오.\nChoose the most appropriate answer.';
            }
            return '';
        }

        function handleStart() {
            if (state.name && state.nationality && state.birthYear) {
                state.showTest = true;
                render();
            }
        }

        function handleAnswerChange(id, value) {
            state.answers[id] = value;
            render();
        }

        function submitTest() {
            let vocabCount = 0, grammarCount = 0, understandCount = 0;
            let vocabTotal = 0, grammarTotal = 0, understandTotal = 0;

            questions.forEach(q => {
                if (q.section === 'vocabulary') {
                    vocabTotal++;
                    if (state.answers[q.id] === q.correct) vocabCount++;
                }
                if (q.section === 'grammar') {
                    grammarTotal++;
                    if (state.answers[q.id] === q.correct) grammarCount++;
                }
                if (q.section === 'understanding') {
                    understandTotal++;
                    if (state.answers[q.id] === q.correct) understandCount++;
                }
            });

            state.vocabScore = Math.round((vocabCount / vocabTotal) * 44);
            state.grammarScore = Math.round((grammarCount / grammarTotal) * 56);
            state.understandScore = Math.round((understandCount / understandTotal) * 100);
            state.score = Math.round(((vocabCount + grammarCount + understandCount) / questions.length) * 100);
            state.showResults = true;
            render();
        }

        // Render function
        function render() {
            const app = document.getElementById('app');
            if (!state.showTest) {
                app.innerHTML = `
                    <div class="max-w-2xl mx-auto p-8">
                        <div class="bg-white rounded-lg shadow-lg p-8">
                            <div class="text-center mb-8 pb-6 border-b-2 border-blue-600">
                                <h1 class="text-3xl font-bold text-gray-800 mb-2">한국어 능력 평가 시험 (Level 1)</h1>
                                <p class="text-sm text-gray-600 mb-1">Korean Proficiency Test - Beginner Level</p>
                                <p class="text-sm text-gray-500">امتحان تحديد مستوى اللغة الكورية - المستوى الأول</p>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg mb-6 text-sm text-gray-700">
                                <strong>지시사항 (Instructions / التعليمات):</strong><br/>
                                • 각 문제에서 가장 적절한 답을 선택하세요.<br/>
                                • Choose the most appropriate answer for each question.<br/>
                                • اختر الإجابة الأنسب لكل سؤال.
                            </div>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">Name / الاسم:</label>
                                    <input
                                        type="text"
                                        id="name"
                                        class="w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="Enter your name"
                                    />
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">Nationality / الجنسية:</label>
                                    <input
                                        type="text"
                                        id="nationality"
                                        class="w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="Enter your nationality"
                                    />
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">Year of birth / سنة الميلاد:</label>
                                    <input
                                        type="number"
                                        id="birthYear"
                                        class="w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="Enter your birth year"
                                        min="1900"
                                        max="2010"
                                    />
                                </div>
                            </div>
                            <button 
                                id="startButton"
                                class="w-full mt-6 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"
                            >
                                Start Test / ابدأ الاختبار
                            </button>
                        </div>
                    </div>
                `;
                document.getElementById('name').addEventListener('input', (e) => state.name = e.target.value);
                document.getElementById('nationality').addEventListener('input', (e) => state.nationality = e.target.value);
                document.getElementById('birthYear').addEventListener('input', (e) => state.birthYear = e.target.value);
                const startButton = document.getElementById('startButton');
                startButton.disabled = !state.name || !state.nationality || !state.birthYear;
                startButton.addEventListener('click', handleStart);
                document.getElementById('name').addEventListener('input', () => {
                    startButton.disabled = !state.name || !state.nationality || !state.birthYear;
                });
                document.getElementById('nationality').addEventListener('input', () => {
                    startButton.disabled = !state.name || !state.nationality || !state.birthYear;
                });
                document.getElementById('birthYear').addEventListener('input', () => {
                    startButton.disabled = !state.name || !state.nationality || !state.birthYear;
                });
            } else if (state.showResults) {
                const vocabPercentage = Math.round((state.vocabScore / 44) * 100);
                const grammarPercentage = Math.round((state.grammarScore / 56) * 100);
                const understandPercentage = Math.round((state.understandScore / 100) * 100);

                app.innerHTML = `
                    <div class="max-w-6xl mx-auto p-8">
                        <div class="bg-white rounded-lg shadow-lg p-8">
                            <div class="flex items-center mb-8">
                                <div class="w-12 h-12 bg-gradient-to-br from-amber-400 to-amber-600 rounded-lg flex items-center justify-center mr-4">
                                    <span class="text-white font-bold text-lg">세</span>
                                </div>
                                <div>
                                    <h1 class="text-2xl font-bold text-gray-800">online Korean test results</h1>
                                </div>
                            </div>
                            <div class="overflow-x-auto mb-8">
                                <table class="w-full border-collapse border border-gray-300">
                                    <thead>
                                        <tr class="bg-gray-100">
                                            <th class="border border-gray-300 p-3 text-sm font-medium">Name</th>
                                            <th class="border border-gray-300 p-3 text-sm font-medium">Nationality</th>
                                            <th class="border border-gray-300 p-3 text-sm font-medium">Year of birth</th>
                                            <th class="border border-gray-300 p-3 text-sm font-medium">Date of exam</th>
                                            <th class="border border-gray-300 p-3 text-sm font-medium">Test option</th>
                                            <th class="border border-gray-300 p-3 text-sm font-medium">Level Placement</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="border border-gray-300 p-3 text-sm">${state.name}</td>
                                            <td class="border border-gray-300 p-3 text-sm">${state.nationality}</td>
                                            <td class="border border-gray-300 p-3 text-sm">${state.birthYear}</td>
                                            <td class="border border-gray-300 p-3 text-sm">${currentDate}</td>
                                            <td class="border border-gray-300 p-3 text-sm">Beginner</td>
                                            <td class="border border-gray-300 p-3 text-sm bg-green-100 font-semibold">3A</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <p class="text-sm text-gray-600 mb-8">
                                ※Level placement result can be adjusted through additional consultation with Korean language teachers or according to each King Sejong Institute's learning condition.
                            </p>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div>
                                    <h2 class="text-xl font-bold text-gray-800 mb-4">Detailed evaluation result</h2>
                                    <div class="overflow-x-auto">
                                        <table class="w-full border-collapse border border-gray-300">
                                            <thead>
                                                <tr class="bg-gray-100">
                                                    <th class="border border-gray-300 p-3 text-sm font-medium">Details area</th>
                                                    <th class="border border-gray-300 p-3 text-sm font-medium">Test Score</th>
                                                    <th class="border border-gray-300 p-3 text-sm font-medium">Points possible</th>
                                                    <th class="border border-gray-300 p-3 text-sm font-medium">Percentage correct</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td class="border border-gray-300 p-3 text-sm font-medium">Vocabulary</td>
                                                    <td class="border border-gray-300 p-3 text-sm text-center">${state.vocabScore}</td>
                                                    <td class="border border-gray-300 p-3 text-sm text-center">44</td>
                                                    <td class="border border-gray-300 p-3 text-sm text-center bg-blue-50">${vocabPercentage}%</td>
                                                </tr>
                                                <tr>
                                                    <td class="border border-gray-300 p-3 text-sm font-medium">Grammar</td>
                                                    <td class="border border-gray-300 p-3 text-sm text-center">${state.grammarScore}</td>
                                                    <td class="border border-gray-300 p-3 text-sm text-center">56</td>
                                                    <td class="border border-gray-300 p-3 text-sm text-center bg-green-50">${grammarPercentage}%</td>
                                                </tr>
                                                <tr>
                                                    <td class="border border-gray-300 p-3 text-sm font-medium">Understand</td>
                                                    <td class="border border-gray-300 p-3 text-sm text-center">${state.understandScore}</td>
                                                    <td class="border border-gray-300 p-3 text-sm text-center">100</td>
                                                    <td class="border border-gray-300 p-3 text-sm text-center bg-yellow-50">${understandPercentage}%</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="flex flex-col items-center">
                                    <h3 class="text-lg font-semibold mb-6 text-gray-800">Performance Radar</h3>
                                    <canvas id="radarChart" class="w-64 h-64"></canvas>
                                    <!-- Hidden SVG to maintain compatibility with original code -->
                                    <div class="radar-svg">
                                        <svg viewBox="0 0 200 200" class="w-full h-full">
                                            <defs>
                                                <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                                                    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#e5e7eb" strokeWidth="1"/>
                                                </pattern>
                                            </defs>
                                            ${[20, 40, 60, 80].map((r, i) => `
                                                <circle cx="100" cy="100" r="${r}" fill="none" stroke="#e5e7eb" strokeWidth="1"/>
                                            `).join('')}
                                            <line x1="100" y1="20" x2="100" y2="180" stroke="#e5e7eb" strokeWidth="1"/>
                                            <line x1="30" y1="150" x2="170" y2="50" stroke="#e5e7eb" strokeWidth="1"/>
                                            <line x1="30" y1="50" x2="170" y2="150" stroke="#e5e7eb" strokeWidth="1"/>
                                            <polygon
                                                points="100,${100 - (vocabPercentage * 0.8)} ${100 + (grammarPercentage * 0.69)},${100 + (grammarPercentage * 0.4)} ${100 - (understandPercentage * 0.69)},${100 + (understandPercentage * 0.4)}"
                                                fill="rgba(59, 130, 246, 0.3)"
                                                stroke="#3b82f6"
                                                strokeWidth="2"
                                            />
                                            <circle cx="100" cy="${100 - (vocabPercentage * 0.8)}" r="4" fill="#3b82f6"/>
                                            <circle cx="${100 + (grammarPercentage * 0.69)}" cy="${100 + (grammarPercentage * 0.4)}" r="4" fill="#3b82f6"/>
                                            <circle cx="${100 - (understandPercentage * 0.69)}" cy="${100 + (understandPercentage * 0.4)}" r="4" fill="#3b82f6"/>
                                            <text x="100" y="15" text-anchor="middle" class="text-xs fill-gray-600" font-size="12">Vocabulary</text>
                                            <text x="185" y="155" text-anchor="middle" class="text-xs fill-gray-600" font-size="12">Grammar</text>
                                            <text x="15" y="155" text-anchor="middle" class="text-xs fill-gray-600" font-size="12">Understand</text>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-8 pt-6 border-t border-gray-200 text-center">
                                <button 
                                    onclick="window.print()"
                                    class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors shadow-md"
                                >
                                    Print Results
                                </button>
                            </div>
                        </div>
                    </div>
                `;

                // Initialize Chart.js radar chart
                const ctx = document.getElementById('radarChart').getContext('2d');
                new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['Vocabulary', 'Grammar', 'Understand'],
                        datasets: [{
                            label: 'Performance',
                            data: [vocabPercentage, grammarPercentage, understandPercentage],
                            fill: true,
                            backgroundColor: 'rgba(59, 130, 246, 0.3)',
                            borderColor: '#3b82f6',
                            pointBackgroundColor: '#3b82f6',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: '#3b82f6'
                        }]
                    },
                    options: {
                        scales: {
                            r: {
                                angleLines: { color: '#e5e7eb' },
                                grid: { color: '#e5e7eb' },
                                pointLabels: { font: { size: 12 } },
                                ticks: { beginAtZero: true, max: 100, stepSize: 20 }
                            }
                        },
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            } else {
                app.innerHTML = `
                    <div class="bg-white rounded-lg shadow-lg p-8">
                        <div class="text-center mb-8 pb-6 border-b-2 border-blue-600">
                            <h1 class="text-3xl font-bold text-gray-800 mb-2">한국어 능력 평가 시험 (Level 1)</h1>
                            <p class="text-sm text-gray-600 mb-1">Korean Proficiency Test - Beginner Level</p>
                            <p class="text-sm text-gray-500">امتحان تحديد مستوى اللغة الكورية - المستوى الأول</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg mb-6 text-sm text-gray-700 border-l-4 border-blue-400">
                            <strong>지시사항 (Instructions / التعليمات):</strong><br/>
                            • 각 문제에서 가장 적절한 답을 선택하세요.<br/>
                            • Choose the most appropriate answer for each question.<br/>
                            • اختر الإجابة الأنسب لكل سؤال.
                        </div>
                        <div class="space-y-8">
                            ${questions.map((q, index) => {
                                const isNewSection = index === 0 || q.id === 11 || q.id === 16;
                                return `
                                    <div>
                                        ${isNewSection ? `
                                            <div class="bg-blue-100 p-4 rounded-lg mb-6 border-l-4 border-blue-500">
                                                <div class="font-bold text-blue-800 whitespace-pre-line text-sm">
                                                    ${getSectionTitle(q.id)}
                                                </div>
                                            </div>
                                        ` : ''}
                                        <div class="question-container bg-gray-50 p-6 rounded-lg border border-gray-200">
                                            <div class="flex items-start mb-4">
                                                <span class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-bold mr-3 mt-1">${q.id}</span>
                                                <div class="flex-1">
                                                    <div class="bg-blue-50 p-4 rounded-lg border-l-3 border-l-blue-400 mb-4">
                                                        <div class="text-base leading-relaxed">${formatQuestionText(q.korean)}</div>
                                                    </div>
                                                    <div class="grid grid-cols-2 gap-3">
                                                        ${q.options.map((option, optIndex) => {
                                                            const optionValue = q.type === 'mark' ? option : (optIndex + 1).toString();
                                                            const isSelected = state.answers[q.id] === optionValue;
                                                            return `
                                                                <button
                                                                    onclick="handleAnswerChange(${q.id}, '${optionValue}')"
                                                                    class="option-button p-4 text-left rounded-lg border-2 transition-all duration-200 hover:shadow-md ${isSelected ? 'selected' : 'bg-white border-gray-300 hover:bg-gray-50 hover:border-blue-300'}"
                                                                >
                                                                    <span class="font-semibold text-blue-600 mr-2">${option.split(' ')[0]}</span>
                                                                    <span class="text-gray-800">${option.substring(option.indexOf(' ') + 1)}</span>
                                                                </button>
                                                            `;
                                                        }).join('')}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                        <div class="mt-12 pt-8 border-t border-gray-200 text-center">
                            <div class="bg-green-50 p-6 rounded-lg border border-green-200 mb-6">
                                <h3 class="text-lg font-bold text-green-800 mb-2">시험 완료 - Test Completed - انتهاء الاختبار</h3>
                                <p class="text-sm text-green-700">답안을 검토하고 제출하세요 - Review your answers and submit - راجع إجاباتك وسلّم الاختبار</p>
                            </div>
                            <button 
                                onclick="submitTest()"
                                class="bg-green-600 text-white px-8 py-4 rounded-lg font-semibold hover:bg-green-700 transition-colors shadow-lg text-lg"
                            >
                                 Submit Test / تسليم الاختبار
                            </button>
                        </div>
                    </div>
                `;
            }
        }

        // Initial render
        render();
    </script>
</body>
</html>
